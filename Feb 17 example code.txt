<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
	
	<title>Feb 17 Practice</title>
	<script>

      var shotsTaken = [false, false, false, false, false, false];
      var ships = [false, true, true, true, false, false];
      var hitCount = 0;
      var missCount = 0;

      function validShot(num) {
         if (num >= 0 && num <= ships.length - 1) {
           return true;
         }
         else {
           return false;
         }
      }     

      function shotAlreadyTaken(num) {
         if (shotsTaken[num]) {
            return true;
         }
         else {
            return false;
         }
       //return shotsTaken[num];    // simplify this function
      }

      function itIsAHit(num) {
         return ships[num];     // ships[ ] is an array of true/false values
      }

      function recordHit(num) {
        hitCount++;
        print("Hit...\n");
      }

      function recordMiss(num) {
        missCount++;
        print("Missed...\n");
      }

      function takeAShot(num) {
         if (validShot(num)) {
           if (shotAlreadyTaken(num)) {
             print("Oops, you already took that shot.\n");
           }
           else {
             shotsTaken[num] = true;
             if (itIsAHit(num)) {
               recordHit(num);
             }
             else {
               recordMiss(num);
             }
           }
         }
         else {
           print("Oops, that is not a valid location.\n");
         }
      }

      function getInput() {
        var inEle = getEle("txtInput");
        //alert(getEle("txtInput").value);
        return inEle.value;
      }

      function shipSunk() {
        return hitCount == 3;
      }

      function playGame() {
         //alert("Play Game");
         if (hitCount == 3) {
            print("You have already sunk the ship.\n");
         }
         else {
           var shot = getInput();
           takeAShot(shot);
           
           if (shipSunk()) {
             print("You just sank the ship.\n");
           }
         }
      }

//============================================================================

      function printArray(a, delim) {
        if (delim == undefined) {
          delim = " ";
        }
        for(var i = 0; i < a.length; i++) {
           print(a[i] + delim);
        }
      }

      function test() {
         var arr = [1 ,2.4343, 3, true, "world", [6,[0,0,0],7,8], {name: "Bob", age: 14}];
         printArray(arr, ", ");
      }

      function sum(a) {
        var total = 0;
        for(var i = 0; i < a.length; i++) {
           total = total + a[i];
        }
        return total;
      }
      
      function getEle(id) {
        return document.getElementById(id);
      }

      function print(txt) {
        var out = getEle("txtOutput");
        out.value = out.value + txt;
        out.scrollTop = out.scrollHeight;
      }
    
      function println(txt) {
          print(txt + "\n");
      }

      function doInput() {
        var inEle = getEle("txtInput");
        var txt = inEle.value + "\n";
        print(txt);
        inEle.value = "";
      }

        // find the average of an array of numbers
        //   Pass in an array
        //   Pass  back the average
        //   Add all the element together, divide  by the count
		function average(data) {  // arr is a local variable to the function
            var total = 0;

			if (data == undefined) {
				 //document.write("data undefined");
				 return undefined;
		        }
			else {
				for(var i = 0; i < data.length; i++) {
					total = total + data[i];   //  total += data[i]
				}
				return total / data.length;
			 }
		};

      // Pass in a full name "last, first"
      // return the first name
      function firstName(fullName) {
          var delimPos = fullName.indexOf(", ");
          
          if (delimPos != -1) {  //found it
             return fullName.substr(delimPos + 2);
          }
          else {
             return "bad name format";
          }
       }

      function initials(name) {
         name = stripExtraSpaces(name);
         if (name.length == 0) {
            return "";
         }
         var init = "";
         // first letter
         name = stripExtraSpaces(name);
         init = init + name[0];
         var spacePos = name.indexOf(" ");
         if (spacePos != -1) { //found a space
             init = init + name[spacePos + 1];
             // another space??
             spacePos = name.indexOf(" ", spacePos + 1);

             if (spacePos != -1) { // found another space
                init = init + name[spacePos + 1];
             }
         }
         return init;
      }

      // Pass in a string
      // Return string with no more than one space at time
      function stripExtraSpaces(str) {
        var outStr = "";
        str = str.trim();
        var prevCh = "";

        for(var i = 0; i < str.length; i++) {
           var ch = str[i];
           if (!(ch == " " && prevCh == " ")) {
              outStr = outStr + ch;
              prevCh = ch;
           }
        }
        return outStr;
      }

      function test2() {
         /*
         var arr = [1,2,3,4,5];
         printArray(arr, ",");
         println("");
         println( "Total is: " + sum(arr) );
         println( "Average of arr: " + average(arr) );
         
         //var name = getInput();
         println( "First name is " + firstName(name) );
         */
         var name = getInput();
         println( "Initials: " + initials(name) );
         //println( "[" + stripExtraSpaces(getInput()) + "]" );
      }

    </script>
</head>
<body>
<h1>February 10 Practice</h1>

<p>Input:<br />
<input id="txtInput" maxlength="50" onchange="" size="60" type="text" /></p>

<p>Output:<br />
<textarea cols="60" id="txtOutput" readonly="yes" rows="10"></textarea></p>

<p><input id="doit" onclick="test2()" type="button" value="Play Game" /></p>
</body>
</html>
